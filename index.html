<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¯ ã‚¨ã‚¤ãƒ ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 100%;
      height: 100vh;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
    }

    .container {
      width: 100%;
      max-width: 900px;
    }

    .header {
      color: white;
      text-align: center;
      margin-bottom: 2rem;
    }

    .header h1 {
      font-size: 2.25rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    .stats {
      display: flex;
      gap: 2rem;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .stat-box {
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
    }

    .stat-score {
      background: #1e40af;
    }

    .stat-miss {
      background: #991b1b;
    }

    .stat-time {
      background: #6b21a8;
    }

    .stat-value {
      color: #fcd34d;
    }

    .button-container {
      text-align: center;
      margin-bottom: 2rem;
    }

    .start-btn {
      padding: 1rem 2rem;
      font-size: 1.25rem;
      font-weight: bold;
      color: white;
      background: linear-gradient(to right, #06b6d4, #3b82f6);
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
    }

    .start-btn:hover {
      background: linear-gradient(to right, #0891b2, #1d4ed8);
      transform: scale(1.05);
    }

    .game-area {
      position: relative;
      width: 100%;
      aspect-ratio: 3 / 2;
      background: #475569;
      border-radius: 0.5rem;
      border: 4px solid white;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      cursor: crosshair;
    }





    .target-circle:hover {
      transform: scale(1.1);
    }

    .target-circle:active {
      transform: scale(0.95);
    }

    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .overlay-text {
      color: white;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .footer {
      color: white;
      text-align: center;
      margin-top: 2rem;
      max-width: 800px;
    }

    .footer p {
      font-size: 1rem;
      margin: 0.5rem 0;
    }

    .completion-message {
      margin-top: 1.5rem;
      padding: 1rem;
      background: #eab308;
      border-radius: 0.5rem;
    }

    .completion-message p {
      color: #1e293b;
      margin: 0.5rem 0;
    }

    .completion-message p:first-child {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .completion-message .detail {
      font-size: 1.125rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ¯ ã‚¨ã‚¤ãƒ ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼</h1>
      <div class="stats">
        <div class="stat-box stat-score">
          ã‚¹ã‚³ã‚¢: <span class="stat-value" id="score">0</span>/50
        </div>
        <div class="stat-box stat-miss">
          ãƒŸã‚¹: <span class="stat-value" id="missCount">0</span>
        </div>
        <div class="stat-box stat-time">
          æ™‚é–“: <span class="stat-value" id="time">0.0</span>ç§’
        </div>
      </div>
    </div>

    <div class="button-container">
      <button class="start-btn" id="startBtn">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹</button>
    </div>

    <div class="game-area" id="gameArea">
      <div class="overlay" id="overlay">
        <div class="overlay-text">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—</div>
      </div>
    </div>

    <div class="footer">
      <p><strong>ğŸ“Œ ãƒ«ãƒ¼ãƒ«</strong></p>
      <p>é’ã„å††ã‚’ã‚¿ãƒƒãƒ— â†’ æ–°ã—ã„å††ãŒè¿½åŠ </p>
      <p>é–“é•ãˆã¦èƒŒæ™¯ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ãƒŸã‚¹ã‚«ã‚¦ãƒ³ãƒˆå¢—åŠ </p>
      <p style="margin-top: 1rem; color: #06b6d4;"><strong>50å›æˆåŠŸã™ã‚‹ã¾ã§ã®æ™‚é–“ã‚’ç«¶ãŠã†ï¼</strong></p>
      <div id="completionMessage"></div>
    </div>
  </div>

  <script>
    let score = 0;
    let missCount = 0;
    let gameActive = false;
    let startTime = null;
    let boxes = [];
    let completed = false;
    let animationFrameId = null;

    const gameArea = document.getElementById('gameArea');
    const startBtn = document.getElementById('startBtn');
    const overlay = document.getElementById('overlay');
    const scoreEl = document.getElementById('score');
    const missCountEl = document.getElementById('missCount');
    const timeEl = document.getElementById('time');
    const completionMessageEl = document.getElementById('completionMessage');

    startBtn.onclick = function() {
      score = 0;
      missCount = 0;
      completed = false;
      gameActive = true;
      startTime = performance.now();
      boxes = [];
      completionMessageEl.innerHTML = '';
      
      scoreEl.textContent = '0';
      missCountEl.textContent = '0';
      timeEl.textContent = '0.0';
      overlay.style.display = 'none';

      addNewBox();
      updateTimer();
    };

    function updateTimer() {
      if (!gameActive) return;

      const elapsed = (performance.now() - startTime) / 1000;
      timeEl.textContent = elapsed.toFixed(2);

      animationFrameId = requestAnimationFrame(updateTimer);
    }

    function addNewBox() {
      const gameWidth = gameArea.offsetWidth;
      const gameHeight = gameArea.offsetHeight;
      const circleRadius = 40; // 5rem = 80px, radius = 40px
      
      const x = Math.random() * (gameWidth - circleRadius * 2) + circleRadius;
      const y = Math.random() * (gameHeight - circleRadius * 2) + circleRadius;
      const id = Math.random();

      const circle = document.createElement('button');
      circle.className = 'target-circle';
      circle.style.left = x + 'px';
      circle.style.top = y + 'px';
      circle.style.transform = 'translate(-50%, -50%)';

      circle.onclick = function(e) {
        e.stopPropagation();
        handleBoxClick(id, circle);
      };

      gameArea.appendChild(circle);
      boxes.push({ id, element: circle });
    }

    function handleBoxClick(id, element) {
      if (!gameActive) return;

      score++;
      scoreEl.textContent = score;
      element.remove();
      boxes = boxes.filter(b => b.id !== id);

      if (score >= 50) {
        endGame();
        return;
      }

      addNewBox();
    }

    gameArea.onclick = function(e) {
      if (!gameActive || e.target !== gameArea) return;
      missCount++;
      missCountEl.textContent = missCount;
    };

    function endGame() {
      gameActive = false;
      completed = true;
      cancelAnimationFrame(animationFrameId);

      const finalTime = (performance.now() - startTime) / 1000;
      timeEl.textContent = finalTime.toFixed(2);

      boxes.forEach(b => b.element.remove());
      boxes = [];

      completionMessageEl.innerHTML = '<div class="completion-message"><p>ğŸ‰ å®Œäº†ï¼<\/p><p>ã‚¯ãƒªã‚¢æ™‚é–“: <span class="detail">' + finalTime.toFixed(2) + 'ç§’<\/span><\/p><p>ãƒŸã‚¹æ•°: <span class="detail">' + missCount + '<\/span><\/p><\/div>';

      overlay.style.display = 'flex';
      overlay.innerHTML = '<div class="overlay-text">å®Œäº†ï¼ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¾ã™ã‹ï¼Ÿ<\/div>';
      startBtn.textContent = 'ã‚‚ã†ä¸€åº¦';
    }
  </script>
</body>
</html>
